# í”„ë¡œê·¸ë˜ë¨¸ìŠ¤

## [ë‹¤ë‹¨ê³„ ì¹«ì†” íŒë§¤](https://programmers.co.kr/learn/courses/30/lessons/77486)

* ë‚œì´ë„: Level 3
* í’€ì´ ì–¸ì–´: Swift
* ë¬¸ì œ ìš”ì•½: ë‹¤ë‹¨ê³„ ì¡°ì§ì˜ íŒë§¤ì›ë“¤ì´ ë“í•œ ì´ìµê¸ˆì„ ë°°ì—´ë¡œ ë¦¬í„´

### ì½”ë“œ

##### ì‹œê°„ ì´ˆê³¼ (í‹€ë¦° í’€ì´)

```swift
func solution(_ enroll:[String], _ referral:[String], _ seller:[String], _ amount:[Int]) -> [Int] {
    var result = [Int](repeating: 0, count: enroll.count)

    func findRecommender(of person: String) -> (Int, String) {
        let idx = enroll.firstIndex(of: person)!
        return (idx, referral[idx])
    }

    for i in 0..<seller.count {
        var profit = amount[i] * 100
        var person = seller[i]
        var idx = enroll.firstIndex(of: person)!
        while person != "-" && profit > 0 {
            (idx, person) = findRecommender(of: person)
            result[idx] += profit - profit / 10
            profit /= 10
        }
    }
    return result
}
```

* í…ŒìŠ¤íŠ¸ 9ë²ˆ ~ 13ë²ˆ `ì‹œê°„ ì´ˆê³¼`
* ë°˜ë³µë¬¸ì„ ë” ì¤„ì—¬ì•¼ í•˜ëŠ” ê²ƒì¸ê°€ ê³ ë¯¼í–ˆëŠ”ë° ì‹œê°„ ì´ˆê³¼ì˜ ë²”ì¸ì€ O(n)ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§„ `firstIndex(of:)`ì¸ë“¯ í•˜ë‹¤.

##### êµ¬ê¸€ë§ í›„ ì‘ì„±í•œ ì½”ë“œ

```swift
func solution(_ enroll:[String], _ referral:[String], _ seller:[String], _ amount:[Int]) -> [Int] {
    var connections = [String: String]()
    var profits = [String: Int]()
    profits["-"] = 0

    for i in 0..<enroll.count {
        connections[enroll[i]] = referral[i]
        profits[enroll[i]] = 0
    }

    for i in 0..<seller.count {
        var profit = amount[i] * 100
        var person = seller[i]
        while person != "-" && profit > 0  {
            profits[person]! += profit - profit / 10
            person = connections[person]!
            profit /= 10
        }
    }
    return enroll.map { profits[$0]! }
}
```

* ë”•ì…”ë„ˆë¦¬ë¥¼ í™œìš©í•˜ë©´ ì‹œê°„ë³µì¡ë„ë¥¼ O(1)ê¹Œì§€ ì¤„ì¼ ìˆ˜ ìˆë‹¤ğŸ’¡

### íšŒê³ 

- ë ˆë²¨3 ì¹˜ê³ ëŠ” í¬ì¸íŠ¸ ë”± í•˜ë‚˜ë§Œ ì¡ìœ¼ë©´ ë¹„êµì  ì‰½ê²Œ í’€ë¦¬ëŠ” ë¬¸ì œì˜€ì„í…ë°, ìš”ìƒˆ ì•Œê³ ë¦¬ì¦˜ì„ ì†Œí™€íˆ í–ˆë”ë‹ˆ ì •ë‹µì„ ë– ì˜¬ë¦¬ê¸° ì‰½ì§€ ì•Šì•˜ë‹¤... ê³„ì† ì •ì§„í•˜ì!